<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ciao sono Greg</title>

  <style>
    :root{
      --tile: 90px;
      --gap: 30px;
      --colMax: 480px;
      --colMin: 360px;
      --portfolioPadL: 38px;
      --gridPadL: 10px;

      /* âœ… alza TUTTO sotto (immagini + descrizioni) */
      --belowOffset: -50px;

      /* allineamento social = altezza riga "RIVA" (tarabile) */
      --socialTop: calc(20px + (var(--tile) * 2) - 10px);

      /* titoli progetti sotto i social */
      --topProjectsExtra: 260px;
      --projRowGap: 10px;
      --projColGap: 10px;
    }

    *{ box-sizing: border-box; }

    body{
      margin: 28px 36px 24px;
      background: #000;
      color: #fff;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 16.5px;
      line-height: 1.5;
    }

    p{ margin: 0; }

    /* ===== LINK BASE ===== */
    a{
      color: inherit;
      text-decoration: none;
      transition: opacity 150ms ease, transform 150ms ease;
    }
    a:hover{
      opacity: 0.6;
      transform: translateX(2px);
    }

    /* ===== LAYOUT (TOP + BELOW) ===== */
    .top,
    .below{
      display: grid;
      grid-template-columns: 1fr minmax(var(--colMin), var(--colMax));
      gap: var(--gap);
    }

    /* âœ… IMPORTANTISSIMO: i titoli sopra devono stare "sopra" e restare cliccabili */
    .top{
      position: relative;
      z-index: 2;
    }

    /* ðŸ‘‡ alza/abbassa TUTTO quello che sta sotto la scacchiera */
    .below{
      position: relative;
      z-index: 1;
      margin-top: var(--belowOffset);
      align-items: start;
    }

    /* ===== COLONNA DESTRA (TESTO + SOCIAL + PROGETTI) ===== */
    .right{
      padding-top: 20px;
      position: relative;                /* per ancorare social e titoli */
      min-height: calc(var(--tile) * 3); /* altezza scacchiera */
      overflow: visible;
    }

    .desc{
      margin-top: 6px;
      font-size: 17px;
      line-height: 1.55;
    }

    .social{
      position: absolute;
      top: var(--socialTop);
      left: 0;

      display: grid;
      grid-template-columns: auto auto;
      column-gap: 4px;
      row-gap: 0;
      font-size: 17px;
      white-space: nowrap;
    }

    /* override dellâ€™hover globale: qui niente shift/fade */
    .social a{
      height: 32px;
      display: flex;
      align-items: center;
      padding: 0 14px 0 8px;

      opacity: 1;
      transform: none;
      transition: background 150ms ease, color 150ms ease;
    }
    .social a:hover{
      opacity: 1;
      transform: none;
      background: #fff;
      color: #000;
    }

    /* ===== TITOLI PROGETTI SOTTO I SOCIAL (âœ… cliccabili) ===== */
    .top-projects{
      position: absolute;
      top: calc(var(--socialTop) + var(--topProjectsExtra));
      left: 0;

      display: grid;
      grid-template-columns: 1fr 1fr;
      column-gap: var(--projColGap);
      row-gap: var(--projRowGap);
      font-size: 17px;
      white-space: nowrap;

      /* âœ… garantisce click anche se qualcosa passa sopra */
      z-index: 3;
    }

    .top-projects a{
      height: 32px;
      display: flex;
      align-items: center;
      padding: 0 14px 0 8px;

      opacity: 1;
      transform: none;
      transition: background 150ms ease, color 150ms ease;
    }
    .top-projects a:hover{
      opacity: 1;
      transform: none;
      background: #fff;
      color: #000;
    }

    /* ===== SCACCHIERA ===== */
    .dock-grid{ padding-left: var(--gridPadL); }
    .dock-grid .row{ display: flex; }

    .letter{
      width: var(--tile);
      height: var(--tile);
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
      cursor: pointer;
      transition: background 150ms ease;
    }

    .char{
      font-size: 42px;
      font-weight: 700;
      color: #fff;
      user-select: none;
      transition: color 150ms ease, transform 150ms ease;
    }

    .letter:hover{ background: #fff; }
    .letter:hover .char{
      color: #000;
      transform: scale(1.5);
    }

    /* ===== PORTFOLIO ===== */
    .portfolio{
      padding-left: var(--portfolioPadL);
      max-width: none;
    }

    html{ scroll-behavior: smooth; }

    .project{ margin-top: 200px; }
    .project:first-of-type{ margin-top: 0; }

    .embed{
      width: 100%;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      background: #000;
      margin-bottom: 20px;
    }

    .embed iframe{
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    /* ===== DESCRIZIONI A DESTRA (sotto) ===== */
    .side-desc{ position: relative; }

    .side-text{
      position: absolute;
      width: 100%;
      font-size: 17px;
      line-height: 1.55;
    }

    /* âœ… titoli sotto NON cliccabili */
    .side-text h4{
      margin: 0 0 6px;
      font-size: 17px;
      font-weight: 700;
    }

    .side-text p{ margin-bottom: 22px; }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 900px){
      body{ margin: 24px; }
      .top, .below{ grid-template-columns: 1fr; }
      .side-desc{ display: none; }
      .top-projects{ display: none; }
      .social{ position: static; margin-top: 18px; }
      .right{ min-height: auto; }
    }
  </style>
</head>

<body>
  <div class="top">
    <div class="left">
      <div class="dock-grid">
        <div class="row">
          <span class="letter"><span class="char">G</span></span>
          <span class="letter"><span class="char">R</span></span>
          <span class="letter"><span class="char">E</span></span>
          <span class="letter"><span class="char">G</span></span>
        </div>
        <div class="row">
          <span class="letter"><span class="char">O</span></span>
          <span class="letter"><span class="char">R</span></span>
          <span class="letter"><span class="char">I</span></span>
          <span class="letter"><span class="char">O</span></span>
        </div>
        <div class="row">
          <span class="letter"><span class="char">R</span></span>
          <span class="letter"><span class="char">I</span></span>
          <span class="letter"><span class="char">V</span></span>
          <span class="letter"><span class="char">A</span></span>
        </div>
      </div>
    </div>

    <div class="right">
      <p class="desc">
        Mi chiamo Gregorio, ma potete chiamarmi Greg!<br>
        Studio comunicazione visiva alla SUPSI/DACD di Mendrisio.
        Questo sito Ã¨ il mio spazio personale dove raccolgo progetti e idee in evoluzione.
      </p>

      <div class="social">
        <a href="https://www.instagram.com/g.orilla.art/">Instagram</a>
        <a href="mailto:greg.riva@bluewin.ch">Email personale</a>
        <a href="https://github.com/GregorioRiva">Github</a>
        <a href="mailto:gregorio.riva@student.supsi.ch">Email SUPSI</a>
      </div>

      <!-- âœ… QUESTI SONO CLICCABILI E RESTANO SOLO QUI -->
      <div class="top-projects" aria-label="Progetti">
        <a href="#autoritratto2d">Autoritratto 2D</a>
        <a href="#autoritratto3d">Autoritratto 3D</a>
        <a href="#progetto3">Caratteri in movimento</a>
        <a href="#progetto4">Data Self-Portrait</a>
      </div>
    </div>
  </div>

  <div class="below">
    <div class="portfolio">
      <section class="project" id="autoritratto2d">
        <div class="embed">
          <iframe src="Autoritratto2D/index.html"></iframe>
        </div>
      </section>

      <section class="project" id="autoritratto3d">
        <div class="embed">
          <iframe src="Autoritratto3D/index.html"></iframe>
        </div>
      </section>

      <section class="project" id="progetto3">
        <div class="embed">
          <!-- iframe futuro: es. <iframe src="Progetto3/index.html"></iframe> -->
        </div>
      </section>

      <section class="project" id="progetto4">
        <div class="embed">
          <!-- iframe futuro: es. <iframe src="Progetto4/index.html"></iframe> -->
        </div>
      </section>
    </div>

    <div class="side-desc">
      <div class="side-text" data-target="autoritratto2d">
        <h4>Autoritratto2D</h4>
        <p>
          Un autoritratto bidimensionale derivato da una fotografia personale,
          convertita in bianco e nero e analizzata a livello di pixel.
          Ogni pixel viene trasformato in un punto, generando una trama puntinata
          deformata da un sistema di forze simile a una calamita virtuale.
        </p>
      </div>

      <div class="side-text" data-target="autoritratto3d">
        <h4>Autoritratto3D</h4>
        <p>
          Un autoritratto tridimensionale generato attraverso regole procedurali.
          La forma si sviluppa nello spazio come struttura dinamica,
          variabile nel tempo e potenzialmente reattiva allâ€™interazione.
        </p>
      </div>

      <div class="side-text" data-target="progetto3">
        <h4>Caratteri in movimento</h4>
        <p>
          Descrizione del progetto in arrivo.
          Spazio riservato a un lavoro futuro o in fase di sviluppo.
        </p>
      </div>

      <div class="side-text" data-target="progetto4">
        <h4>Data Self-Portrait</h4>
        <p>
          Descrizione del progetto in arrivo.
          Spazio riservato a un lavoro futuro o sperimentale.
        </p>
      </div>
    </div>
  </div>

  <script>
    const OFFSET = -200;

    function docTop(el){
      return el.getBoundingClientRect().top + window.scrollY;
    }
    function docBottom(el){
      const r = el.getBoundingClientRect();
      return r.bottom + window.scrollY;
    }

    function alignDescriptions(){
      const sideDesc = document.querySelector('.side-desc');
      if (!sideDesc) return;

      const sideTop = docTop(sideDesc);
      let lastBottom = 0;

      document.querySelectorAll('.side-text').forEach(desc => {
        const target = document.getElementById(desc.dataset.target);
        if (!target) return;

        const iframe = target.querySelector('.embed iframe');
        let y;

        if (iframe){
          y = docBottom(iframe) - sideTop + OFFSET;
        } else {
          y = lastBottom + 80;
        }

        desc.style.top = y + 'px';
        lastBottom = y + desc.offsetHeight;
      });

      const portfolio = document.querySelector('.portfolio');
      if (portfolio) sideDesc.style.minHeight = portfolio.offsetHeight + 'px';
    }

    let ticking = false;
    function requestAlign(){
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(() => {
        alignDescriptions();
        ticking = false;
      });
    }

    window.addEventListener('load', () => {
      alignDescriptions();
      document.querySelectorAll('.embed iframe').forEach(f => {
        f.addEventListener('load', requestAlign);
      });
    });

    window.addEventListener('resize', requestAlign);
    window.addEventListener('scroll', requestAlign, { passive: true });
  </script>
</body>
</html>
